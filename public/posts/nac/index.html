<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>It ain&#39;t stupid if it works | </title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="How I somewhat got around my shitty DSL download speeds
Recently I reset my computer because it was unbearibly slow from time to time. I wiped all my harddrives and re-installed Windows 11. When I re-installed the first game from my Steam library, Baldur&rsquo;s Gate 3 which clocks in at around 150 GB download size, it hit me: my internet sucks. With a measly 70 Mbps download, it would take me almost 5 hours to download the game and that is just one of the many games I wanted to install.">
    <meta name="generator" content="Hugo 0.139.0">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="//localhost:1313/posts/nac/">
    

    <meta property="og:url" content="//localhost:1313/posts/nac/">
  <meta property="og:title" content="It ain&#39;t stupid if it works">
  <meta property="og:description" content="How I somewhat got around my shitty DSL download speeds Recently I reset my computer because it was unbearibly slow from time to time. I wiped all my harddrives and re-installed Windows 11. When I re-installed the first game from my Steam library, Baldur’s Gate 3 which clocks in at around 150 GB download size, it hit me: my internet sucks. With a measly 70 Mbps download, it would take me almost 5 hours to download the game and that is just one of the many games I wanted to install.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-27T18:44:17+01:00">
    <meta property="article:modified_time" content="2024-03-27T18:44:17+01:00">
    <meta property="article:tag" content="Development">

  <meta itemprop="name" content="It ain&#39;t stupid if it works">
  <meta itemprop="description" content="How I somewhat got around my shitty DSL download speeds Recently I reset my computer because it was unbearibly slow from time to time. I wiped all my harddrives and re-installed Windows 11. When I re-installed the first game from my Steam library, Baldur’s Gate 3 which clocks in at around 150 GB download size, it hit me: my internet sucks. With a measly 70 Mbps download, it would take me almost 5 hours to download the game and that is just one of the many games I wanted to install.">
  <meta itemprop="datePublished" content="2024-03-27T18:44:17+01:00">
  <meta itemprop="dateModified" content="2024-03-27T18:44:17+01:00">
  <meta itemprop="wordCount" content="1087">
  <meta itemprop="keywords" content="Development">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="It ain&#39;t stupid if it works">
  <meta name="twitter:description" content="How I somewhat got around my shitty DSL download speeds Recently I reset my computer because it was unbearibly slow from time to time. I wiped all my harddrives and re-installed Windows 11. When I re-installed the first game from my Steam library, Baldur’s Gate 3 which clocks in at around 150 GB download size, it hit me: my internet sucks. With a measly 70 Mbps download, it would take me almost 5 hours to download the game and that is just one of the many games I wanted to install.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">It ain&#39;t stupid if it works</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-03-27T18:44:17+01:00">March 27, 2024</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h3 id="how-i-somewhat-got-around-my-shitty-dsl-download-speeds">How I somewhat got around my shitty DSL download speeds</h3>
<p>Recently I reset my computer because it was unbearibly slow from time to time. I wiped all my harddrives and re-installed Windows 11. When I re-installed the first game from my Steam library, Baldur&rsquo;s Gate 3 which clocks in at around 150 GB download size, it hit me: my internet sucks. With a measly 70 Mbps download, it would take me almost 5 hours to download the game and that is just one of the many games I wanted to install.</p>
<p>Then I rembered: wait, I have unlimited celluar data. I can download as much as I like and 4G is way faster than the 70 Mbps I&rsquo;m getting via DSL! So I did a speed test that clocked in at 205 Mbps. That&rsquo;s an increase of ~193%, now Baldur&rsquo;s Gate just takes a little over 1,5 hours to download.
So I connected my PC to my phone&rsquo;s hotspot, and resumed the download. Speeds were looking good, the estimated time looked correct and so I left my computer alone to make some food.</p>
<p>I was done eating, came back to my PC, happy to play some Baldur&rsquo;s Gate aaaaand&hellip; it was still downloading with around 70 Mbps. Huh? Did it loose connection and resume via Ethernet? I checked on my phone and nope, my PC still was connected. Next I checked in the Windows settings. No traffic on the Ethernet network adapter, everything ran on the wifi adapter. Some googling later and I found a forum&rsquo;s post of someone complaining about the provider limiting download speed drasticly after some time when downloading large amounts of data.
So I tried turning off Wifi, waited for about two minutes, turning it back on, connecting to my phone and resume the download. My thought process being that maybe the provider would only limit for a &ldquo;sustained current of data&rdquo;, for the lack of a better word, and it actually worked. The download resumed just as fast as before I got limited.</p>
<p>Because I only got full speed for about 10 to 15 minutes, the process of turning off the Wifi, waiting, turning it on and reconnecting got very annoying very quickly, I tried to find ways of achieving the same with less &ldquo;work&rdquo;. Soon I found out that I can just deactivate the Wifi adapter in Windows setting. It will then continue on Ethernet and when I want to try Wifi again, I just need to deactivate Ethernet and re-activate Wifi. It will re-connect automatically to the hotspot and resume the download on cellular data. That got way too cumbersome aswell, and I thought of a way to do it automatically.</p>
<p>My first idea was to ask ChatGPT what the best language is to do native Windows programming. It thought of C# to be a good choice, so I enquired about some code that lets me cut off internet access on Windows 11, as I never even wrote a single line of C# in my life, and wanted to jump in head first without learning the basics. What it generated was surprisingly way less code than I expected:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Management;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Program</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> Main(<span style="color:#66d9ef">string</span>[] args)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Find the network adapter corresponding to internet connection</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">string</span> adapterName = <span style="color:#e6db74">&#34;Your Network Adapter Name&#34;</span>; <span style="color:#75715e">// Change this to your network adapter name</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Disable internet access by disabling the network adapter</span>
</span></span><span style="display:flex;"><span>        DisableNetworkAdapter(adapterName);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Console.WriteLine(<span style="color:#e6db74">&#34;Internet access has been disabled.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> DisableNetworkAdapter(<span style="color:#66d9ef">string</span> adapterName)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ManagementObjectSearcher searcher = <span style="color:#66d9ef">new</span> ManagementObjectSearcher(<span style="color:#e6db74">&#34;SELECT * FROM Win32_NetworkAdapter WHERE NetConnectionId != NULL&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (ManagementObject networkAdapter <span style="color:#66d9ef">in</span> searcher.Get())
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">string</span> name = networkAdapter[<span style="color:#e6db74">&#34;NetConnectionId&#34;</span>] <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (name != <span style="color:#66d9ef">null</span> &amp;&amp; name.Equals(adapterName, StringComparison.OrdinalIgnoreCase))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                networkAdapter.InvokeMethod(<span style="color:#e6db74">&#34;Disable&#34;</span>, <span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The prompt being</p>
<blockquote>
<p>Using C#, how could I &ldquo;cut off&rdquo; internet access on Windows 11?</p>
</blockquote>
<p>The code snipped actually compiled and worked first try, what was a first for me with ChatGPT code generation. Usually it doens&rsquo;t really get what I want it to do or there&rsquo;s some other issue. Or maybe just my prompts suck, I don&rsquo;t know ¯\_(ツ)_/¯.</p>
<p>Going on, I wanted to have some sort of GUI where I could just press a button to toggle the network adapter.</p>
<p>Prompting</p>
<blockquote>
<p>Add a very simple GUI to it. Make an input field where the user can enter the network adapter name and a button that calls the DisableNetworkAdapter method</p>
</blockquote>
<p>I got</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Management;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Forms;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Program</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> Main(<span style="color:#66d9ef">string</span>[] args)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Application.EnableVisualStyles();
</span></span><span style="display:flex;"><span>        Application.SetCompatibleTextRenderingDefault(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>        Application.Run(<span style="color:#66d9ef">new</span> MainForm());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainForm</span> : Form
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> TextBox adapterNameTextBox;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> Button disableButton;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> MainForm()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> InitializeComponent()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.adapterNameTextBox = <span style="color:#66d9ef">new</span> TextBox();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.disableButton = <span style="color:#66d9ef">new</span> Button();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.SuspendLayout();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// configuration of UI elements is not important in this example</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.disableButton.Click += <span style="color:#66d9ef">new</span> System.EventHandler(<span style="color:#66d9ef">this</span>.disableButton_Click);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// more configuration</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.ResumeLayout(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.PerformLayout();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> disableButton_Click(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">string</span> adapterName = adapterNameTextBox.Text;
</span></span><span style="display:flex;"><span>            DisableNetworkAdapter(adapterName);
</span></span><span style="display:flex;"><span>            MessageBox.Show(<span style="color:#e6db74">&#34;Internet access has been disabled for the specified adapter.&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> DisableNetworkAdapter(<span style="color:#66d9ef">string</span> adapterName)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ManagementObjectSearcher searcher = <span style="color:#66d9ef">new</span> ManagementObjectSearcher(<span style="color:#e6db74">&#34;SELECT * FROM Win32_NetworkAdapter WHERE NetConnectionId != NULL&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (ManagementObject networkAdapter <span style="color:#66d9ef">in</span> searcher.Get())
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">string</span> name = networkAdapter[<span style="color:#e6db74">&#34;NetConnectionId&#34;</span>] <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (name != <span style="color:#66d9ef">null</span> &amp;&amp; name.Equals(adapterName, StringComparison.OrdinalIgnoreCase))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                networkAdapter.InvokeMethod(<span style="color:#e6db74">&#34;Disable&#34;</span>, <span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        MessageBox.Show(<span style="color:#e6db74">&#34;Failed to find the specified network adapter.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Some trouble shooting because of missing references and the re-creation of the project, this time as a Windows Forms project, later, the code compiled. Because the rest is not very interesting and this post is already long enough, here&rsquo;s the any% speedrun:</p>
<p>I</p>
<ul>
<li>added another textfield, as I need to cycle between two different adapters. I could have hardcoded the adapter names, but I wanted it somewhat generic if something about my network setup changes</li>
<li>implemented some basic logic to always disable B when A is active and vice versa</li>
<li>added some cleanup code to re-anable all adapters when closing the application</li>
</ul>
<p>This is what I ended up with:</p>
<p><img src="/img/nac-gui.png" alt=""></p>
<p>You can view the full code on <a href="https://github.com/CodeF0x/NAC">GitHub</a>.</p>
<p>While not solving some difficult problem or building something impressive or inherently useful, I got to play around with C# and Windows development, something I&rsquo;ve never done before. I even got a little better at writing AI prompts. That will be important later when the job of the Software Engineer fully transformed to Prompt Engineer 😉.
But most importantly, I don&rsquo;t clog up my entire bandwidth for hours because I want to drive around in a virtual car for 30 minutes before going to bed.</p>
<p>Thanks for coming to my TED talk.</p>
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/development/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Development</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/posts/remove-youtube-statement-banner/">Remove Youtube Statement Banner</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="//localhost:1313/" >
    &copy; 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
